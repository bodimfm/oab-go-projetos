(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{2133:function(e,o,s){Promise.resolve().then(s.bind(s,1610))},9376:function(e,o,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(o,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(o,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(o,{useSearchParams:function(){return r.useSearchParams}})},1610:function(e,o,s){"use strict";s.r(o),s.d(o,{default:function(){return d}});var r=s(7437),a=s(2265),t=s(9376),i=s(7648),c=s(4933);function n(){let e=(0,t.useSearchParams)().get("termo")||"",[o,s]=(0,a.useState)([]),[n,d]=(0,a.useState)(!1),[l,m]=(0,a.useState)(null),[h,u]=(0,a.useState)(e);return(0,a.useEffect)(()=>{(async()=>{if(e.trim())try{d(!0),m(null);let{data:o}=await c.h.buscar(e);s(o)}catch(e){console.error("Erro ao realizar busca:",e),m("Ocorreu um erro ao realizar a busca. Tente novamente mais tarde.")}finally{d(!1)}})()},[e]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Busca"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Pesquise por projetos e comiss\xf5es da OAB-GO"})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),h.trim()&&(window.location.href="/buscar?termo=".concat(encodeURIComponent(h.trim())))},children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Digite um termo para buscar projetos ou comiss\xf5es...",className:"w-full pl-4 pr-12 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:e=>u(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-blue-600",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})}),e&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:['Resultados da busca por "',e,'"']}),(0,r.jsx)("div",{className:"h-1 w-20 bg-blue-600 rounded-full"})]}),n?(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Realizando busca..."})}):l?(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,r.jsx)("p",{className:"text-red-500",children:l})}):0===o.length&&e?(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,r.jsxs)("p",{className:"text-gray-500",children:['Nenhum resultado encontrado para "',e,'".']})}):e?(0,r.jsxs)("div",{className:"space-y-6",children:[o.filter(e=>"projeto"===e.tipo).length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Projetos"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.filter(e=>"projeto"===e.tipo).map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2 truncate",children:e.nome}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 line-clamp-3",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(i.default,{href:"/projetos/".concat(e.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver Detalhes →"})})]})},e.id))})]}),o.filter(e=>"comissao"===e.tipo).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comiss\xf5es"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.filter(e=>"comissao"===e.tipo).map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2 truncate",children:e.nome}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 line-clamp-3",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(i.default,{href:"/membros?comissao_id=".concat(e.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver Membros →"})})]})},e.id))})]})]}):(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Digite um termo no campo de busca acima para come\xe7ar."})})]})}function d(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Carregando..."}),children:(0,r.jsx)(n,{})})}},4933:function(e,o,s){"use strict";s.d(o,{h:function(){return i}});let r="".concat("https://qnsbjljmnflihwcovuwz.supabase.co","/rest/v1"),a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFuc2JqbGptbmZsaWh3Y292dXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NjcyNjQsImV4cCI6MjA2MjU0MzI2NH0.UWGXOyL8J7e11W_CE3zIo5bn-5LwKQ1YtAS1V72DTtk",t={Authorization:"Bearer ".concat(a),apikey:a,"Content-Type":"application/json"},i={getComissoes:async()=>{let e=await fetch("".concat(r,"/comissoes?select=*&order=nome"),{headers:t});if(!e.ok)throw Error("Erro ao carregar comiss\xf5es");return{data:await e.json()}},getProjetos:async()=>{let e=await fetch("".concat(r,"/view_projetos_comissoes?select=*"),{headers:t});if(!e.ok)throw Error("Erro ao carregar projetos");let o=await e.json(),s={};return o.forEach(e=>{s[e.projeto_id]||(s[e.projeto_id]={id:e.projeto_id,nome:e.projeto_nome,descricao:e.projeto_descricao,status:e.projeto_status,objetivos:e.objetivos,publico_alvo:e.publico_alvo,data_inicio:e.data_inicio,data_fim_prevista:e.data_fim_prevista,comissoes:[]}),s[e.projeto_id].comissoes.push({id:e.comissao_id,nome:e.comissao_nome,descricao:e.comissao_descricao,papel:e.papel_comissao})}),{data:Object.values(s)}},getProjeto:async e=>{let o=await fetch("".concat(r,"/projetos?id=eq.").concat(e,"&select=*"),{headers:t});if(!o.ok)throw Error("Erro ao carregar detalhes do projeto");let s=await o.json();if(0===s.length)throw Error("Projeto n\xe3o encontrado");let a=await fetch("".concat(r,"/projetos_comissoes?projeto_id=eq.").concat(e,"&select=papel_comissao,comissoes:comissoes(id,nome,descricao,area_atuacao)"),{headers:t});if(!a.ok)throw Error("Erro ao carregar comiss\xf5es do projeto");let i=await a.json(),c=await fetch("".concat(r,"/tags_projetos?projeto_id=eq.").concat(e,"&select=tag"),{headers:t});if(!c.ok)throw Error("Erro ao carregar tags do projeto");let n=await c.json();return{data:{...s[0],comissoes:i.map(e=>({papel:e.papel_comissao,...e.comissoes})),tags:n.map(e=>e.tag)}}},getSugestoesIntegracao:async e=>{let o=await fetch("".concat(r,"/rpc/sugerir_integracao_projetos"),{method:"POST",headers:t,body:JSON.stringify({projeto_id:e})});if(!o.ok)throw Error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o");return{data:await o.json()}},getMembros:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o="".concat(r,"/view_membros_comissoes?select=*");e&&(o+="&comissao_id=eq.".concat(e)),o+="&order=comissao_nome,membro_nome";let s=await fetch(o,{headers:t});if(!s.ok)throw Error("Erro ao carregar membros");return{data:await s.json()}},buscar:async e=>{let o=await fetch("".concat(r,"/rpc/buscar_projetos_e_comissoes"),{method:"POST",headers:t,body:JSON.stringify({termo:e})});if(!o.ok)throw Error("Erro ao realizar busca");return{data:await o.json()}},criarProjeto:async e=>{let{nome:o,descricao:s,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:d,status:l,comissoes:m,tags:h}=e;if(!o||!l||!m||0===m.length)throw Error("Campos obrigat\xf3rios: nome, status e pelo menos uma comiss\xe3o");let u=await fetch("".concat(r,"/projetos"),{method:"POST",headers:{...t,Prefer:"return=representation"},body:JSON.stringify({nome:o,descricao:s,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:d,status:l})});if(!u.ok)throw Error((await u.json()).message||"Erro ao criar projeto");let p=await u.json(),j=p[0].id,g=m.map(e=>({projeto_id:j,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao}));if(!(await fetch("".concat(r,"/projetos_comissoes"),{method:"POST",headers:t,body:JSON.stringify(g)})).ok)throw Error("Erro ao relacionar projeto com comiss\xf5es");if(h&&h.length>0){let e=h.map(e=>({projeto_id:j,tag:e}));if(!(await fetch("".concat(r,"/tags_projetos"),{method:"POST",headers:t,body:JSON.stringify(e)})).ok)throw Error("Erro ao adicionar tags ao projeto")}return{data:p[0]}},adicionarMembro:async e=>{let{comissao_id:o,nome:s,cargo:a,email:i,telefone:c,inscricao_oab:n}=e;if(!o||!s)throw Error("Campos obrigat\xf3rios: comissao_id e nome");let d=await fetch("".concat(r,"/membros_comissoes"),{method:"POST",headers:{...t,Prefer:"return=representation"},body:JSON.stringify({comissao_id:o,nome:s,cargo:a,email:i,telefone:c,inscricao_oab:n})});if(!d.ok)throw Error((await d.json()).message||"Erro ao adicionar membro");return{data:(await d.json())[0]}}}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=2133)}),_N_E=e.O()}]);