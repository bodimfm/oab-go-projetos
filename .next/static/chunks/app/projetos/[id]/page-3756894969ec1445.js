(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{3936:function(e,s,a){Promise.resolve().then(a.bind(a,8447))},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},8447:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var t=a(7437),o=a(2265),r=a(9376),i=a(7648),c=a(4933);function n(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),[a,n]=(0,o.useState)(null),[l,d]=(0,o.useState)([]),[m,h]=(0,o.useState)(!0),[p,u]=(0,o.useState)(!0),[g,j]=(0,o.useState)(null);(0,o.useEffect)(()=>{let s=async()=>{try{u(!0);let{data:s}=await c.h.getSugestoesIntegracao(e.id);d(s)}catch(e){console.error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o:",e)}finally{u(!1)}};(async()=>{try{h(!0);let{data:s}=await c.h.getProjeto(e.id);n(s)}catch(e){console.error("Erro ao carregar detalhes do projeto:",e),j("N\xe3o foi poss\xedvel carregar os detalhes do projeto. Tente novamente mais tarde.")}finally{h(!1)}})(),s()},[e.id]);let x=e=>e?new Date(e).toLocaleDateString("pt-BR"):"N\xe3o definida";return m?(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Carregando detalhes do projeto..."})}):g?(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:[(0,t.jsx)("p",{className:"text-red-500",children:g}),(0,t.jsx)("button",{onClick:()=>s.push("/projetos"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Voltar para Projetos"})]}):a?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.default,{href:"/projetos",className:"text-blue-600 hover:text-blue-800 mb-2 inline-block",children:"← Voltar para Projetos"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:a.nome})]}),(0,t.jsx)("div",{className:"mt-4 md:mt-0",children:(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat((e=>{switch(e){case"concluido":return"bg-green-100 text-green-800";case"em_andamento":return"bg-blue-100 text-blue-800";case"planejamento":return"bg-yellow-100 text-yellow-800";case"cancelado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.status)),children:"concluido"===a.status?"Conclu\xeddo":"em_andamento"===a.status?"Em Andamento":"planejamento"===a.status?"Planejamento":"Cancelado"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Informa\xe7\xf5es do Projeto"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"Descri\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-gray-600",children:a.descricao||"Sem descri\xe7\xe3o dispon\xedvel"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"Objetivos"}),(0,t.jsx)("p",{className:"text-gray-600",children:a.objetivos||"N\xe3o especificados"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"Resultados Esperados"}),(0,t.jsx)("p",{className:"text-gray-600",children:a.resultados_esperados||"N\xe3o especificados"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"P\xfablico Alvo"}),(0,t.jsx)("p",{className:"text-gray-600",children:a.publico_alvo||"N\xe3o especificado"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"Data de In\xedcio"}),(0,t.jsx)("p",{className:"text-gray-600",children:x(a.data_inicio)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-gray-700 font-medium mb-1",children:"Data de Conclus\xe3o Prevista"}),(0,t.jsx)("p",{className:"text-gray-600",children:x(a.data_fim_prevista)})]})]})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.tags&&a.tags.length>0?a.tags.map((e,s)=>(0,t.jsx)("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:e},s)):(0,t.jsx)("p",{className:"text-gray-500",children:"Nenhuma tag definida para este projeto"})})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1",children:[(0,t.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Comiss\xf5es Participantes"}),a.comissoes&&a.comissoes.length>0?(0,t.jsx)("ul",{className:"space-y-4",children:a.comissoes.map(e=>(0,t.jsxs)("li",{className:"border-b border-gray-200 pb-3 last:border-0",children:[(0,t.jsx)("div",{className:"font-medium text-gray-800",children:e.nome}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("lider"===e.papel?"bg-purple-100 text-purple-800":"participante"===e.papel?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"lider"===e.papel?"L\xedder":"participante"===e.papel?"Participante":"Consultivo"})})]},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"Nenhuma comiss\xe3o participante"})]}),(0,t.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Sugest\xf5es de Integra\xe7\xe3o"}),p?(0,t.jsx)("p",{className:"text-gray-500",children:"Carregando sugest\xf5es..."}):l.length>0?(0,t.jsx)("ul",{className:"space-y-4",children:l.slice(0,3).map(e=>(0,t.jsxs)("li",{className:"border-b border-gray-200 pb-3 last:border-0",children:[(0,t.jsx)("div",{className:"font-medium text-gray-800",children:(0,t.jsx)(i.default,{href:"/projetos/".concat(e.projeto_similar_id),className:"text-blue-600 hover:text-blue-800",children:e.projeto_similar_nome})}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.projeto_similar_descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,t.jsx)("div",{className:"mt-2 text-sm",children:(0,t.jsxs)("span",{className:"text-gray-700",children:[e.comissoes_comuns," comiss\xf5es em comum"]})})]},e.projeto_similar_id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"Nenhuma sugest\xe3o de integra\xe7\xe3o encontrada"})]})]})]})]}):(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Projeto n\xe3o encontrado."}),(0,t.jsx)("button",{onClick:()=>s.push("/projetos"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Voltar para Projetos"})]})}},4933:function(e,s,a){"use strict";a.d(s,{h:function(){return i}});let t="".concat("https://qnsbjljmnflihwcovuwz.supabase.co","/rest/v1"),o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFuc2JqbGptbmZsaWh3Y292dXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NjcyNjQsImV4cCI6MjA2MjU0MzI2NH0.UWGXOyL8J7e11W_CE3zIo5bn-5LwKQ1YtAS1V72DTtk",r={Authorization:"Bearer ".concat(o),apikey:o,"Content-Type":"application/json"},i={getComissoes:async()=>{let e=await fetch("".concat(t,"/comissoes?select=*&order=nome"),{headers:r});if(!e.ok)throw Error("Erro ao carregar comiss\xf5es");return{data:await e.json()}},getProjetos:async()=>{let e=await fetch("".concat(t,"/view_projetos_comissoes?select=*"),{headers:r});if(!e.ok)throw Error("Erro ao carregar projetos");let s=await e.json(),a={};return s.forEach(e=>{a[e.projeto_id]||(a[e.projeto_id]={id:e.projeto_id,nome:e.projeto_nome,descricao:e.projeto_descricao,status:e.projeto_status,objetivos:e.objetivos,publico_alvo:e.publico_alvo,data_inicio:e.data_inicio,data_fim_prevista:e.data_fim_prevista,comissoes:[]}),a[e.projeto_id].comissoes.push({id:e.comissao_id,nome:e.comissao_nome,descricao:e.comissao_descricao,papel:e.papel_comissao})}),{data:Object.values(a)}},getProjeto:async e=>{let s=await fetch("".concat(t,"/projetos?id=eq.").concat(e,"&select=*"),{headers:r});if(!s.ok)throw Error("Erro ao carregar detalhes do projeto");let a=await s.json();if(0===a.length)throw Error("Projeto n\xe3o encontrado");let o=await fetch("".concat(t,"/projetos_comissoes?projeto_id=eq.").concat(e,"&select=papel_comissao,comissoes:comissoes(id,nome,descricao,area_atuacao)"),{headers:r});if(!o.ok)throw Error("Erro ao carregar comiss\xf5es do projeto");let i=await o.json(),c=await fetch("".concat(t,"/tags_projetos?projeto_id=eq.").concat(e,"&select=tag"),{headers:r});if(!c.ok)throw Error("Erro ao carregar tags do projeto");let n=await c.json();return{data:{...a[0],comissoes:i.map(e=>({papel:e.papel_comissao,...e.comissoes})),tags:n.map(e=>e.tag)}}},getSugestoesIntegracao:async e=>{let s=await fetch("".concat(t,"/rpc/sugerir_integracao_projetos"),{method:"POST",headers:r,body:JSON.stringify({projeto_id:e})});if(!s.ok)throw Error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o");return{data:await s.json()}},getMembros:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s="".concat(t,"/view_membros_comissoes?select=*");e&&(s+="&comissao_id=eq.".concat(e)),s+="&order=comissao_nome,membro_nome";let a=await fetch(s,{headers:r});if(!a.ok)throw Error("Erro ao carregar membros");return{data:await a.json()}},buscar:async e=>{let s=await fetch("".concat(t,"/rpc/buscar_projetos_e_comissoes"),{method:"POST",headers:r,body:JSON.stringify({termo:e})});if(!s.ok)throw Error("Erro ao realizar busca");return{data:await s.json()}},criarProjeto:async e=>{let{nome:s,descricao:a,objetivos:o,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:l,status:d,comissoes:m,tags:h}=e;if(!s||!d||!m||0===m.length)throw Error("Campos obrigat\xf3rios: nome, status e pelo menos uma comiss\xe3o");let p=await fetch("".concat(t,"/projetos"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({nome:s,descricao:a,objetivos:o,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:l,status:d})});if(!p.ok)throw Error((await p.json()).message||"Erro ao criar projeto");let u=await p.json(),g=u[0].id,j=m.map(e=>({projeto_id:g,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao}));if(!(await fetch("".concat(t,"/projetos_comissoes"),{method:"POST",headers:r,body:JSON.stringify(j)})).ok)throw Error("Erro ao relacionar projeto com comiss\xf5es");if(h&&h.length>0){let e=h.map(e=>({projeto_id:g,tag:e}));if(!(await fetch("".concat(t,"/tags_projetos"),{method:"POST",headers:r,body:JSON.stringify(e)})).ok)throw Error("Erro ao adicionar tags ao projeto")}return{data:u[0]}},adicionarMembro:async e=>{let{comissao_id:s,nome:a,cargo:o,email:i,telefone:c,inscricao_oab:n}=e;if(!s||!a)throw Error("Campos obrigat\xf3rios: comissao_id e nome");let l=await fetch("".concat(t,"/membros_comissoes"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({comissao_id:s,nome:a,cargo:o,email:i,telefone:c,inscricao_oab:n})});if(!l.ok)throw Error((await l.json()).message||"Erro ao adicionar membro");return{data:(await l.json())[0]}}}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=3936)}),_N_E=e.O()}]);