(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{5039:function(e,o,t){Promise.resolve().then(t.bind(t,7232))},7232:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return c}});var s=t(7437),a=t(2265),r=t(7648),i=t(4933);function c(){let[e,o]=(0,a.useState)([]),[t,c]=(0,a.useState)(!0),[n,l]=(0,a.useState)(null),[d,m]=(0,a.useState)("todos");(0,a.useEffect)(()=>{(async()=>{try{c(!0);let{data:e}=await i.h.getProjetos();o(e)}catch(e){console.error("Erro ao carregar projetos:",e),l("N\xe3o foi poss\xedvel carregar os projetos. Tente novamente mais tarde.")}finally{c(!1)}})()},[]);let h=e.filter(e=>"todos"===d||e.status===d);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Projetos"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Visualize e gerencie todos os projetos das comiss\xf5es da OAB-GO"})]}),(0,s.jsx)("div",{className:"mt-4 md:mt-0",children:(0,s.jsx)(r.default,{href:"/projetos/novo",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"+ Novo Projeto"})})]}),(0,s.jsxs)("div",{className:"mb-6 bg-white p-4 rounded-md shadow-sm",children:[(0,s.jsx)("div",{className:"text-gray-700 mb-2",children:"Filtrar por status:"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>m("todos"),className:"px-3 py-1 rounded-md transition-colors ".concat("todos"===d?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Todos"}),(0,s.jsx)("button",{onClick:()=>m("planejamento"),className:"px-3 py-1 rounded-md transition-colors ".concat("planejamento"===d?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"),children:"Planejamento"}),(0,s.jsx)("button",{onClick:()=>m("em_andamento"),className:"px-3 py-1 rounded-md transition-colors ".concat("em_andamento"===d?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 hover:bg-blue-200"),children:"Em Andamento"}),(0,s.jsx)("button",{onClick:()=>m("concluido"),className:"px-3 py-1 rounded-md transition-colors ".concat("concluido"===d?"bg-green-500 text-white":"bg-green-100 text-green-800 hover:bg-green-200"),children:"Conclu\xeddo"}),(0,s.jsx)("button",{onClick:()=>m("cancelado"),className:"px-3 py-1 rounded-md transition-colors ".concat("cancelado"===d?"bg-red-500 text-white":"bg-red-100 text-red-800 hover:bg-red-200"),children:"Cancelado"})]})]}),t?(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando projetos..."})}):n?(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,s.jsx)("p",{className:"text-red-500",children:n})}):0===h.length?(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum projeto encontrado com os filtros selecionados."})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2 truncate",children:e.nome}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("concluido"===e.status?"bg-green-100 text-green-800":"em_andamento"===e.status?"bg-blue-100 text-blue-800":"planejamento"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"concluido"===e.status?"Conclu\xeddo":"em_andamento"===e.status?"Em Andamento":"planejamento"===e.status?"Planejamento":"Cancelado"})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Comiss\xf5es:"}),e.comissoes.length>0?(0,s.jsxs)("ul",{className:"text-sm text-gray-600",children:[e.comissoes.slice(0,3).map(e=>(0,s.jsxs)("li",{className:"truncate",children:["• ",e.nome,(0,s.jsxs)("span",{className:"text-gray-500",children:["(","lider"===e.papel?"L\xedder":"participante"===e.papel?"Participante":"Consultivo",")"]})]},e.id)),e.comissoes.length>3&&(0,s.jsxs)("li",{className:"text-blue-600",children:["+ ",e.comissoes.length-3," mais..."]})]}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhuma comiss\xe3o vinculada"})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)(r.default,{href:"/projetos/".concat(e.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver Detalhes →"})})]})},e.id))})]})}},4933:function(e,o,t){"use strict";t.d(o,{h:function(){return i}});let s="".concat("https://qnsbjljmnflihwcovuwz.supabase.co","/rest/v1"),a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFuc2JqbGptbmZsaWh3Y292dXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NjcyNjQsImV4cCI6MjA2MjU0MzI2NH0.UWGXOyL8J7e11W_CE3zIo5bn-5LwKQ1YtAS1V72DTtk",r={Authorization:"Bearer ".concat(a),apikey:a,"Content-Type":"application/json"},i={getComissoes:async()=>{let e=await fetch("".concat(s,"/comissoes?select=*&order=nome"),{headers:r});if(!e.ok)throw Error("Erro ao carregar comiss\xf5es");return{data:await e.json()}},getProjetos:async()=>{let e=await fetch("".concat(s,"/view_projetos_comissoes?select=*"),{headers:r});if(!e.ok)throw Error("Erro ao carregar projetos");let o=await e.json(),t={};return o.forEach(e=>{t[e.projeto_id]||(t[e.projeto_id]={id:e.projeto_id,nome:e.projeto_nome,descricao:e.projeto_descricao,status:e.projeto_status,objetivos:e.objetivos,publico_alvo:e.publico_alvo,data_inicio:e.data_inicio,data_fim_prevista:e.data_fim_prevista,comissoes:[]}),t[e.projeto_id].comissoes.push({id:e.comissao_id,nome:e.comissao_nome,descricao:e.comissao_descricao,papel:e.papel_comissao})}),{data:Object.values(t)}},getProjeto:async e=>{let o=await fetch("".concat(s,"/projetos?id=eq.").concat(e,"&select=*"),{headers:r});if(!o.ok)throw Error("Erro ao carregar detalhes do projeto");let t=await o.json();if(0===t.length)throw Error("Projeto n\xe3o encontrado");let a=await fetch("".concat(s,"/projetos_comissoes?projeto_id=eq.").concat(e,"&select=papel_comissao,comissoes:comissoes(id,nome,descricao,area_atuacao)"),{headers:r});if(!a.ok)throw Error("Erro ao carregar comiss\xf5es do projeto");let i=await a.json(),c=await fetch("".concat(s,"/tags_projetos?projeto_id=eq.").concat(e,"&select=tag"),{headers:r});if(!c.ok)throw Error("Erro ao carregar tags do projeto");let n=await c.json();return{data:{...t[0],comissoes:i.map(e=>({papel:e.papel_comissao,...e.comissoes})),tags:n.map(e=>e.tag)}}},getSugestoesIntegracao:async e=>{let o=await fetch("".concat(s,"/rpc/sugerir_integracao_projetos"),{method:"POST",headers:r,body:JSON.stringify({projeto_id:e})});if(!o.ok)throw Error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o");return{data:await o.json()}},getMembros:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o="".concat(s,"/view_membros_comissoes?select=*");e&&(o+="&comissao_id=eq.".concat(e)),o+="&order=comissao_nome,membro_nome";let t=await fetch(o,{headers:r});if(!t.ok)throw Error("Erro ao carregar membros");return{data:await t.json()}},buscar:async e=>{let o=await fetch("".concat(s,"/rpc/buscar_projetos_e_comissoes"),{method:"POST",headers:r,body:JSON.stringify({termo:e})});if(!o.ok)throw Error("Erro ao realizar busca");return{data:await o.json()}},criarProjeto:async e=>{let{nome:o,descricao:t,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:l,status:d,comissoes:m,tags:h}=e;if(!o||!d||!m||0===m.length)throw Error("Campos obrigat\xf3rios: nome, status e pelo menos uma comiss\xe3o");let p=await fetch("".concat(s,"/projetos"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({nome:o,descricao:t,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:l,status:d})});if(!p.ok)throw Error((await p.json()).message||"Erro ao criar projeto");let u=await p.json(),g=u[0].id,j=m.map(e=>({projeto_id:g,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao}));if(!(await fetch("".concat(s,"/projetos_comissoes"),{method:"POST",headers:r,body:JSON.stringify(j)})).ok)throw Error("Erro ao relacionar projeto com comiss\xf5es");if(h&&h.length>0){let e=h.map(e=>({projeto_id:g,tag:e}));if(!(await fetch("".concat(s,"/tags_projetos"),{method:"POST",headers:r,body:JSON.stringify(e)})).ok)throw Error("Erro ao adicionar tags ao projeto")}return{data:u[0]}},adicionarMembro:async e=>{let{comissao_id:o,nome:t,cargo:a,email:i,telefone:c,inscricao_oab:n}=e;if(!o||!t)throw Error("Campos obrigat\xf3rios: comissao_id e nome");let l=await fetch("".concat(s,"/membros_comissoes"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({comissao_id:o,nome:t,cargo:a,email:i,telefone:c,inscricao_oab:n})});if(!l.ok)throw Error((await l.json()).message||"Erro ao adicionar membro");return{data:(await l.json())[0]}}}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=5039)}),_N_E=e.O()}]);