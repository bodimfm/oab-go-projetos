(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7546:function(e,o,t){Promise.resolve().then(t.bind(t,4379))},4379:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return c}});var s=t(7437),a=t(2265),r=t(7648),i=t(4933);function c(){let[e,o]=(0,a.useState)(!0),[t,c]=(0,a.useState)([]),[n,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{o(!0);let{data:e}=await i.h.getProjetos(),t=e.sort((e,o)=>new Date(o.data_inicio)-new Date(e.data_inicio)).slice(0,5);c(t)}catch(e){console.error("Erro ao carregar projetos recentes:",e),d("N\xe3o foi poss\xedvel carregar os projetos recentes. Tente novamente mais tarde.")}finally{o(!1)}})()},[]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-blue-800 mb-4",children:"Sistema de Gest\xe3o de Comiss\xf5es OAB-GO"}),(0,s.jsx)("p",{className:"text-gray-700 mb-6",children:"Bem-vindo ao sistema de gerenciamento de projetos e comiss\xf5es da OAB-GO. Esta plataforma permite visualizar, criar e gerenciar projetos e membros de comiss\xf5es."}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)(r.default,{href:"/projetos",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",children:"Ver Projetos"}),(0,s.jsx)(r.default,{href:"/membros",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",children:"Ver Membros"})]})]}),(0,s.jsxs)("section",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Projetos Recentes"}),(0,s.jsx)(r.default,{href:"/projetos",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Ver Todos →"})]}),e?(0,s.jsx)("div",{className:"py-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando projetos recentes..."})}):n?(0,s.jsx)("div",{className:"py-8 text-center",children:(0,s.jsx)("p",{className:"text-red-500",children:n})}):0===t.length?(0,s.jsx)("div",{className:"py-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum projeto encontrado."})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2 truncate",children:e.nome}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("concluido"===e.status?"bg-green-100 text-green-800":"em_andamento"===e.status?"bg-blue-100 text-blue-800":"planejamento"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"concluido"===e.status?"Conclu\xeddo":"em_andamento"===e.status?"Em Andamento":"planejamento"===e.status?"Planejamento":"Cancelado"}),(0,s.jsx)(r.default,{href:"/projetos/".concat(e.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Detalhes →"})]})]},e.id))})]})]})}},4933:function(e,o,t){"use strict";t.d(o,{h:function(){return i}});let s="".concat("https://qnsbjljmnflihwcovuwz.supabase.co","/rest/v1"),a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFuc2JqbGptbmZsaWh3Y292dXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NjcyNjQsImV4cCI6MjA2MjU0MzI2NH0.UWGXOyL8J7e11W_CE3zIo5bn-5LwKQ1YtAS1V72DTtk",r={Authorization:"Bearer ".concat(a),apikey:a,"Content-Type":"application/json"},i={getComissoes:async()=>{let e=await fetch("".concat(s,"/comissoes?select=*&order=nome"),{headers:r});if(!e.ok)throw Error("Erro ao carregar comiss\xf5es");return{data:await e.json()}},getProjetos:async()=>{let e=await fetch("".concat(s,"/view_projetos_comissoes?select=*"),{headers:r});if(!e.ok)throw Error("Erro ao carregar projetos");let o=await e.json(),t={};return o.forEach(e=>{t[e.projeto_id]||(t[e.projeto_id]={id:e.projeto_id,nome:e.projeto_nome,descricao:e.projeto_descricao,status:e.projeto_status,objetivos:e.objetivos,publico_alvo:e.publico_alvo,data_inicio:e.data_inicio,data_fim_prevista:e.data_fim_prevista,comissoes:[]}),t[e.projeto_id].comissoes.push({id:e.comissao_id,nome:e.comissao_nome,descricao:e.comissao_descricao,papel:e.papel_comissao})}),{data:Object.values(t)}},getProjeto:async e=>{let o=await fetch("".concat(s,"/projetos?id=eq.").concat(e,"&select=*"),{headers:r});if(!o.ok)throw Error("Erro ao carregar detalhes do projeto");let t=await o.json();if(0===t.length)throw Error("Projeto n\xe3o encontrado");let a=await fetch("".concat(s,"/projetos_comissoes?projeto_id=eq.").concat(e,"&select=papel_comissao,comissoes:comissoes(id,nome,descricao,area_atuacao)"),{headers:r});if(!a.ok)throw Error("Erro ao carregar comiss\xf5es do projeto");let i=await a.json(),c=await fetch("".concat(s,"/tags_projetos?projeto_id=eq.").concat(e,"&select=tag"),{headers:r});if(!c.ok)throw Error("Erro ao carregar tags do projeto");let n=await c.json();return{data:{...t[0],comissoes:i.map(e=>({papel:e.papel_comissao,...e.comissoes})),tags:n.map(e=>e.tag)}}},getSugestoesIntegracao:async e=>{let o=await fetch("".concat(s,"/rpc/sugerir_integracao_projetos"),{method:"POST",headers:r,body:JSON.stringify({projeto_id:e})});if(!o.ok)throw Error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o");return{data:await o.json()}},getMembros:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o="".concat(s,"/view_membros_comissoes?select=*");e&&(o+="&comissao_id=eq.".concat(e)),o+="&order=comissao_nome,membro_nome";let t=await fetch(o,{headers:r});if(!t.ok)throw Error("Erro ao carregar membros");return{data:await t.json()}},buscar:async e=>{let o=await fetch("".concat(s,"/rpc/buscar_projetos_e_comissoes"),{method:"POST",headers:r,body:JSON.stringify({termo:e})});if(!o.ok)throw Error("Erro ao realizar busca");return{data:await o.json()}},criarProjeto:async e=>{let{nome:o,descricao:t,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:d,status:l,comissoes:m,tags:h}=e;if(!o||!l||!m||0===m.length)throw Error("Campos obrigat\xf3rios: nome, status e pelo menos uma comiss\xe3o");let p=await fetch("".concat(s,"/projetos"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({nome:o,descricao:t,objetivos:a,resultados_esperados:i,publico_alvo:c,data_inicio:n,data_fim_prevista:d,status:l})});if(!p.ok)throw Error((await p.json()).message||"Erro ao criar projeto");let j=await p.json(),u=j[0].id,g=m.map(e=>({projeto_id:u,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao}));if(!(await fetch("".concat(s,"/projetos_comissoes"),{method:"POST",headers:r,body:JSON.stringify(g)})).ok)throw Error("Erro ao relacionar projeto com comiss\xf5es");if(h&&h.length>0){let e=h.map(e=>({projeto_id:u,tag:e}));if(!(await fetch("".concat(s,"/tags_projetos"),{method:"POST",headers:r,body:JSON.stringify(e)})).ok)throw Error("Erro ao adicionar tags ao projeto")}return{data:j[0]}},adicionarMembro:async e=>{let{comissao_id:o,nome:t,cargo:a,email:i,telefone:c,inscricao_oab:n}=e;if(!o||!t)throw Error("Campos obrigat\xf3rios: comissao_id e nome");let d=await fetch("".concat(s,"/membros_comissoes"),{method:"POST",headers:{...r,Prefer:"return=representation"},body:JSON.stringify({comissao_id:o,nome:t,cargo:a,email:i,telefone:c,inscricao_oab:n})});if(!d.ok)throw Error((await d.json()).message||"Erro ao adicionar membro");return{data:(await d.json())[0]}}}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=7546)}),_N_E=e.O()}]);