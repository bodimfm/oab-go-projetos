(()=>{var e={};e.id=394,e.ids=[394],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},915:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(3354),a(4810),a(5866);var o=a(3191),r=a(8716),t=a(7922),l=a.n(t),i=a(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(s,n);let d=["",{children:["projetos",{children:["novo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3354)),"/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4810)),"/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js"],m="/projetos/novo/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/projetos/novo/page",pathname:"/projetos/novo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3710:(e,s,a)=>{Promise.resolve().then(a.bind(a,6550))},6550:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var o=a(326),r=a(7577),t=a(5047),l=a(434),i=a(6617);function n({comissoes:e,onComissaoSelect:s,disabled:a,placeholder:t="Buscar comiss\xe3o..."}){let[l,i]=(0,r.useState)(""),[n,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1),[p,u]=(0,r.useState)(-1),x=(0,r.useRef)(null),h=(0,r.useRef)(null),j=e=>{if(!e||!e.id||!e.nome){console.error("Comiss\xe3o inv\xe1lida selecionada:",e);return}s(e),i(""),m(!1)};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[o.jsx("input",{ref:x,type:"text",value:l,onChange:e=>{i(e.target.value),m(!0)},onFocus:()=>l.trim()&&m(!0),onKeyDown:e=>{c&&0!==n.length&&("ArrowDown"===e.key?(e.preventDefault(),u(e=>e<n.length-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),u(e=>e>0?e-1:n.length-1)):"Enter"===e.key&&p>=0?(e.preventDefault(),j(n[p])):"Escape"===e.key&&m(!1))},placeholder:t,className:"form-input pr-10",disabled:a,autoComplete:"off"}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-oab-gray-400",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),c&&n.length>0&&o.jsx("ul",{ref:h,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:n.map((e,s)=>(0,o.jsxs)("li",{className:`px-4 py-2 cursor-pointer hover:bg-oab-red hover:text-white ${s===p?"bg-oab-red text-white":""}`,onClick:()=>j(e),onMouseEnter:()=>u(s),children:[o.jsx("div",{className:"font-medium truncate",children:e.nome}),e.area_atuacao&&o.jsx("div",{className:`text-xs truncate ${s===p?"text-white":"text-oab-gray-500"}`,children:e.area_atuacao})]},e.id))})]})}function d(){let e=(0,t.useRouter)(),[s,a]=(0,r.useState)({nome:"",descricao:"",objetivos:"",resultados_esperados:"",publico_alvo:"",data_inicio:"",data_fim_prevista:"",status:"planejamento",comissoes:[],tags:""}),[d,c]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[u,x]=(0,r.useState)(!1),[h,j]=(0,r.useState)(!0),[v,b]=(0,r.useState)(null),g=e=>{let{name:o,value:r}=e.target;a({...s,[o]:r})},f=(e,s)=>{if(!m||!Array.isArray(m)){console.error("Lista de comiss\xf5es selecionadas n\xe3o dispon\xedvel");return}p(m.map(a=>a.comissao_id===e?{...a,papel_comissao:s}:a))},N=e=>{if(!m||!Array.isArray(m)){console.error("Lista de comiss\xf5es selecionadas n\xe3o dispon\xedvel");return}p(m.filter(s=>s.comissao_id!==e))},_=async a=>{if(a.preventDefault(),!s.nome.trim()){alert("O nome do projeto \xe9 obrigat\xf3rio.");return}if(!m||!Array.isArray(m)||0===m.length){alert("Selecione pelo menos uma comiss\xe3o para o projeto.");return}let o=m.filter(e=>e&&e.comissao_id&&"string"==typeof e.comissao_id&&e.papel_comissao);if(0===o.length){alert("Nenhuma comiss\xe3o v\xe1lida selecionada. Adicione pelo menos uma comiss\xe3o.");return}console.log("Comiss\xf5es selecionadas:",m),console.log("Comiss\xf5es v\xe1lidas:",o);let r=s.tags?s.tags.split(",").map(e=>e.trim()).filter(e=>""!==e):[];try{x(!0),b(null);let a={...s,comissoes:o.map(e=>({comissao_id:e.comissao_id,papel_comissao:e.papel_comissao})),tags:r};console.log("Enviando dados do projeto:",a);let t=await i.h.criarProjeto(a);console.log("Resposta da API:",t),alert("Projeto criado com sucesso!"),e.push("/projetos")}catch(e){console.error("Erro ao criar projeto:",e),b(e.message||"Ocorreu um erro ao criar o projeto. Tente novamente.")}finally{x(!1)}};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)(l.default,{href:"/projetos",className:"flex items-center text-oab-red hover:text-oab-burgundy mb-2 inline-block",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para Projetos"]}),o.jsx("h1",{className:"text-3xl font-bold text-oab-gray-800 mb-2",children:"Novo Projeto"}),o.jsx("p",{className:"text-oab-gray-600 mt-1",children:"Preencha o formul\xe1rio abaixo para criar um novo projeto"})]}),v&&o.jsx("div",{className:"bg-red-50 border-l-4 border-oab-red text-red-700 p-4 mb-6",role:"alert",children:o.jsx("p",{children:v})}),(0,o.jsxs)("form",{onSubmit:_,className:"card",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,o.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("label",{htmlFor:"nome",className:"form-label",children:"Nome do Projeto *"}),o.jsx("input",{type:"text",id:"nome",name:"nome",value:s.nome,onChange:g,className:"form-input",required:!0})]}),(0,o.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),o.jsx("textarea",{id:"descricao",name:"descricao",value:s.descricao,onChange:g,rows:"3",className:"form-input"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"objetivos",className:"form-label",children:"Objetivos"}),o.jsx("textarea",{id:"objetivos",name:"objetivos",value:s.objetivos,onChange:g,rows:"3",className:"form-input"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"resultados_esperados",className:"form-label",children:"Resultados Esperados"}),o.jsx("textarea",{id:"resultados_esperados",name:"resultados_esperados",value:s.resultados_esperados,onChange:g,rows:"3",className:"form-input"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"publico_alvo",className:"form-label",children:"P\xfablico Alvo"}),o.jsx("input",{type:"text",id:"publico_alvo",name:"publico_alvo",value:s.publico_alvo,onChange:g,className:"form-input"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"status",className:"form-label",children:"Status *"}),(0,o.jsxs)("select",{id:"status",name:"status",value:s.status,onChange:g,className:"form-input",required:!0,children:[o.jsx("option",{value:"planejamento",children:"Planejamento"}),o.jsx("option",{value:"em_andamento",children:"Em Andamento"}),o.jsx("option",{value:"concluido",children:"Conclu\xeddo"}),o.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"data_inicio",className:"form-label",children:"Data de In\xedcio"}),o.jsx("input",{type:"date",id:"data_inicio",name:"data_inicio",value:s.data_inicio,onChange:g,className:"form-input"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:"data_fim_prevista",className:"form-label",children:"Data de Conclus\xe3o Prevista"}),o.jsx("input",{type:"date",id:"data_fim_prevista",name:"data_fim_prevista",value:s.data_fim_prevista,onChange:g,className:"form-input"})]}),(0,o.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("label",{htmlFor:"tags",className:"form-label",children:"Tags (separadas por v\xedrgula)"}),o.jsx("input",{type:"text",id:"tags",name:"tags",value:s.tags,onChange:g,placeholder:"Ex: direito digital, educa\xe7\xe3o, evento",className:"form-input"})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-oab-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Comiss\xf5es Participantes *"}),o.jsx("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:(0,o.jsxs)("div",{className:"flex-1",children:[o.jsx(n,{comissoes:d,onComissaoSelect:e=>{if(!e||!e.id||!e.nome){console.error("Comiss\xe3o selecionada inv\xe1lida:",e);return}if(m&&Array.isArray(m)&&m.some(s=>s.comissao_id===e.id)){alert("Esta comiss\xe3o j\xe1 foi adicionada ao projeto.");return}let s=Array.isArray(m)?[...m]:[];s.push({comissao_id:e.id,nome:e.nome,papel_comissao:"participante"}),p(s)},disabled:h,placeholder:"Digite para buscar uma comiss\xe3o..."}),h&&o.jsx("p",{className:"text-sm text-oab-gray-500 mt-1",children:"Carregando comiss\xf5es..."})]})}),m.length>0?o.jsx("div",{className:"mt-4",children:o.jsx("ul",{className:"border rounded-md divide-y",children:m&&m.map(e=>(0,o.jsxs)("li",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between hover:bg-oab-gray-50",children:[o.jsx("div",{className:"font-medium text-oab-gray-800",children:e.nome}),(0,o.jsxs)("div",{className:"flex items-center space-x-4 mt-2 md:mt-0",children:[o.jsx("div",{children:(0,o.jsxs)("select",{value:e.papel_comissao,onChange:s=>f(e.comissao_id,s.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-oab-red",children:[o.jsx("option",{value:"lider",children:"L\xedder"}),o.jsx("option",{value:"participante",children:"Participante"}),o.jsx("option",{value:"consultivo",children:"Consultivo"})]})}),o.jsx("button",{type:"button",onClick:()=>N(e.comissao_id),className:"text-oab-red hover:text-oab-burgundy",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.comissao_id))})}):o.jsx("p",{className:"text-oab-gray-500 mt-4 bg-oab-gray-50 p-4 border rounded-md",children:"Nenhuma comiss\xe3o selecionada"})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4 border-t border-gray-200 pt-6 mt-6",children:[o.jsx(l.default,{href:"/projetos",className:"btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:u?"Salvando...":"Salvar Projeto"})]})]})]})}},3354:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});let o=(0,a(8570).createProxy)(String.raw`/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),o=s.X(0,[24,917],()=>a(915));module.exports=o})();