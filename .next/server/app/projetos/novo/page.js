(()=>{var e={};e.id=394,e.ids=[394],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5957:(e,o,s)=>{"use strict";s.r(o),s.d(o,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(3354),s(5679),s(5866);var a=s(3191),r=s(8716),t=s(7922),l=s.n(t),n=s(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(o,i);let d=["",{children:["projetos",{children:["novo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3354)),"/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5679)),"/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js"],u="/projetos/novo/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/projetos/novo/page",pathname:"/projetos/novo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3710:(e,o,s)=>{Promise.resolve().then(s.bind(s,6550))},5047:(e,o,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(o,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(o,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(o,{useSearchParams:function(){return a.useSearchParams}})},6550:(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>d});var a=s(326),r=s(7577),t=s(5047),l=s(434),n=s(6617);function i({comissoes:e,onComissaoSelect:o,disabled:s,placeholder:t="Buscar comiss\xe3o..."}){let[l,n]=(0,r.useState)(""),[i,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(-1),x=(0,r.useRef)(null),b=(0,r.useRef)(null),h=e=>{o(e),n(""),u(!1)};return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{ref:x,type:"text",value:l,onChange:e=>{n(e.target.value),u(!0)},onFocus:()=>l.trim()&&u(!0),onKeyDown:e=>{c&&0!==i.length&&("ArrowDown"===e.key?(e.preventDefault(),p(e=>e<i.length-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),p(e=>e>0?e-1:i.length-1)):"Enter"===e.key&&m>=0?(e.preventDefault(),h(i[m])):"Escape"===e.key&&u(!1))},placeholder:t,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s,autoComplete:"off"}),c&&i.length>0&&a.jsx("ul",{ref:b,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:i.map((e,o)=>(0,a.jsxs)("li",{className:`px-4 py-2 cursor-pointer hover:bg-blue-50 ${o===m?"bg-blue-100":""}`,onClick:()=>h(e),onMouseEnter:()=>p(o),children:[a.jsx("div",{className:"font-medium truncate",children:e.nome}),e.area_atuacao&&a.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.area_atuacao})]},e.id))})]})}function d(){let e=(0,t.useRouter)(),[o,s]=(0,r.useState)({nome:"",descricao:"",objetivos:"",resultados_esperados:"",publico_alvo:"",data_inicio:"",data_fim_prevista:"",status:"planejamento",comissoes:[],tags:""}),[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[p,x]=(0,r.useState)(!1),[b,h]=(0,r.useState)(!0),[g,f]=(0,r.useState)(null),j=e=>{let{name:a,value:r}=e.target;s({...o,[a]:r})},v=(e,o)=>{if(!u||!Array.isArray(u)){console.error("Lista de comiss\xf5es selecionadas n\xe3o dispon\xedvel");return}m(u.map(s=>s.comissao_id===e?{...s,papel_comissao:o}:s))},y=e=>{if(!u||!Array.isArray(u)){console.error("Lista de comiss\xf5es selecionadas n\xe3o dispon\xedvel");return}m(u.filter(o=>o.comissao_id!==e))},N=async s=>{if(s.preventDefault(),!o.nome.trim()){alert("O nome do projeto \xe9 obrigat\xf3rio.");return}if(0===u.length){alert("Selecione pelo menos uma comiss\xe3o para o projeto.");return}let a=o.tags?o.tags.split(",").map(e=>e.trim()).filter(e=>""!==e):[];try{x(!0),f(null),await n.h.criarProjeto({...o,comissoes:u,tags:a}),alert("Projeto criado com sucesso!"),e.push("/projetos")}catch(e){console.error("Erro ao criar projeto:",e),f(e.message||"Ocorreu um erro ao criar o projeto. Tente novamente.")}finally{x(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx(l.default,{href:"/projetos",className:"text-blue-600 hover:text-blue-800 mb-2 inline-block",children:"← Voltar para Projetos"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Novo Projeto"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Preencha o formul\xe1rio abaixo para criar um novo projeto"})]}),g&&a.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert",children:a.jsx("p",{children:g})}),(0,a.jsxs)("form",{onSubmit:N,className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{htmlFor:"nome",className:"block text-gray-700 font-medium mb-2",children:"Nome do Projeto *"}),a.jsx("input",{type:"text",id:"nome",name:"nome",value:o.nome,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{htmlFor:"descricao",className:"block text-gray-700 font-medium mb-2",children:"Descri\xe7\xe3o"}),a.jsx("textarea",{id:"descricao",name:"descricao",value:o.descricao,onChange:j,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"objetivos",className:"block text-gray-700 font-medium mb-2",children:"Objetivos"}),a.jsx("textarea",{id:"objetivos",name:"objetivos",value:o.objetivos,onChange:j,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"resultados_esperados",className:"block text-gray-700 font-medium mb-2",children:"Resultados Esperados"}),a.jsx("textarea",{id:"resultados_esperados",name:"resultados_esperados",value:o.resultados_esperados,onChange:j,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"publico_alvo",className:"block text-gray-700 font-medium mb-2",children:"P\xfablico Alvo"}),a.jsx("input",{type:"text",id:"publico_alvo",name:"publico_alvo",value:o.publico_alvo,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-gray-700 font-medium mb-2",children:"Status *"}),(0,a.jsxs)("select",{id:"status",name:"status",value:o.status,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"planejamento",children:"Planejamento"}),a.jsx("option",{value:"em_andamento",children:"Em Andamento"}),a.jsx("option",{value:"concluido",children:"Conclu\xeddo"}),a.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"data_inicio",className:"block text-gray-700 font-medium mb-2",children:"Data de In\xedcio"}),a.jsx("input",{type:"date",id:"data_inicio",name:"data_inicio",value:o.data_inicio,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"data_fim_prevista",className:"block text-gray-700 font-medium mb-2",children:"Data de Conclus\xe3o Prevista"}),a.jsx("input",{type:"date",id:"data_fim_prevista",name:"data_fim_prevista",value:o.data_fim_prevista,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{htmlFor:"tags",className:"block text-gray-700 font-medium mb-2",children:"Tags (separadas por v\xedrgula)"}),a.jsx("input",{type:"text",id:"tags",name:"tags",value:o.tags,onChange:j,placeholder:"Ex: direito digital, educa\xe7\xe3o, evento",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Comiss\xf5es Participantes *"}),a.jsx("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(i,{comissoes:d,onComissaoSelect:e=>{if(e){if(u.some(o=>o.comissao_id===e.id)){alert("Esta comiss\xe3o j\xe1 foi adicionada ao projeto.");return}m([...u,{comissao_id:e.id,nome:e.nome,papel_comissao:"participante"}])}},disabled:b,placeholder:"Digite para buscar uma comiss\xe3o..."}),b&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Carregando comiss\xf5es..."})]})}),u.length>0?a.jsx("div",{className:"mt-4",children:a.jsx("ul",{className:"border rounded-md divide-y",children:u&&u.map(e=>(0,a.jsxs)("li",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between",children:[a.jsx("div",{className:"font-medium",children:e.nome}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 md:mt-0",children:[a.jsx("div",{children:(0,a.jsxs)("select",{value:e.papel_comissao,onChange:o=>v(e.comissao_id,o.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"lider",children:"L\xedder"}),a.jsx("option",{value:"participante",children:"Participante"}),a.jsx("option",{value:"consultivo",children:"Consultivo"})]})}),a.jsx("button",{type:"button",onClick:()=>y(e.comissao_id),className:"text-red-600 hover:text-red-800",children:"Remover"})]})]},e.comissao_id))})}):a.jsx("p",{className:"text-gray-500 mt-4",children:"Nenhuma comiss\xe3o selecionada"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx(l.default,{href:"/projetos",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors disabled:bg-blue-400",children:p?"Salvando...":"Salvar Projeto"})]})]})]})}},3354:(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/rafaelmaciel/CODING/oab-go-projetos/src/app/projetos/novo/page.js#default`)}};var o=require("../../../webpack-runtime.js");o.C(e);var s=e=>o(o.s=e),a=o.X(0,[674,107],()=>s(5957));module.exports=a})();