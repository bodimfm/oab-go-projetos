exports.id=581,exports.ids=[581],exports.modules={108:()=>{},4176:(e,r,o)=>{"use strict";o.d(r,{H:()=>c,a:()=>l});var a=o(997),t=o(6689),s=o(2731),i=o(9332);let n=(0,t.createContext)({}),c=({children:e})=>{let[r,o]=(0,t.useState)(null),[c,l]=(0,t.useState)(!0),[d,m]=(0,t.useState)(null),h=(0,i.useRouter)();(0,t.useEffect)(()=>{},[]);let u=async(e,r)=>{l(!0),m(null);try{let a=await s.h.auth.login(e,r);return a.data.require_password_change?(o(a.data),h.push("/alterar-senha")):(o(a.data),h.push("/")),a}catch(e){return m(e.message||"Falha ao realizar login"),{error:e.message}}finally{l(!1)}},x=async e=>{if(!r)return m("Usu\xe1rio n\xe3o autenticado"),{error:"Usu\xe1rio n\xe3o autenticado"};l(!0),m(null);try{let a=await s.h.auth.alterarSenha(r.id,e),t={...r,...a.data,require_password_change:!1};return o(t),a}catch(e){return m(e.message||"Falha ao alterar senha"),{error:e.message}}finally{l(!1)}},p=async e=>{l(!0),m(null);try{return await s.h.auth.solicitarRecuperacao(e)}catch(e){return m(e.message||"Falha ao solicitar recupera\xe7\xe3o"),{error:e.message}}finally{l(!1)}},f=async e=>{l(!0),m(null);try{let r=await s.h.auth.verificarToken(e);return o(r.data),r}catch(e){return m(e.message||"Token inv\xe1lido ou expirado"),{error:e.message}}finally{l(!1)}},g=async e=>{l(!0),m(null);try{return await s.h.auth.cadastrarUsuario(e)}catch(e){return m(e.message||"Falha ao cadastrar usu\xe1rio"),{error:e.message}}finally{l(!1)}};return a.jsx(n.Provider,{value:{isAuthenticated:!!r,user:r,loading:c,error:d,login:u,logout:()=>{o(null),h.push("/login")},alterarSenha:x,solicitarRecuperacao:p,verificarToken:f,cadastrarUsuario:g},children:e})},l=()=>{let e=(0,t.useContext)(n);return void 0===e?{isAuthenticated:!1,user:null,loading:!1,error:null,login:()=>{},logout:()=>{},alterarSenha:()=>{},solicitarRecuperacao:()=>{},verificarToken:()=>{},cadastrarUsuario:()=>{}}:e}},7581:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>u});var a=o(997);o(108);var t=o(4176),s=o(6689),i=o(1664),n=o(9332);function c(){let e=(0,t.a)(),r=e?.isAuthenticated||!1,o=e?.user||null,c=e?.logout||(()=>{}),[l,d]=(0,s.useState)(!1),m=(0,n.useRouter)(),h=(0,n.usePathname)(),u=()=>{d(!l)},x=()=>{c(),m.push("/login")};return(0,a.jsxs)("header",{className:"bg-white shadow-md",children:[a.jsx("div",{className:"bg-oab-primary-dark text-white py-2 text-sm",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,a.jsxs)("a",{href:"tel:+556232382000",className:"flex items-center hover:text-gray-200 transition-colors",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),a.jsx("span",{children:"(62) 3238-2000"})]}),(0,a.jsxs)("a",{href:"mailto:contato@oabgo.org.br",className:"flex items-center hover:text-gray-200 transition-colors",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("span",{children:"contato@oabgo.org.br"})]})]}),r&&a.jsx("div",{className:"text-sm",children:(0,a.jsxs)("span",{children:["Ol\xe1, ",o?.nome_completo||"Usu\xe1rio"]})})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(i,{href:"/",className:"flex items-center space-x-6 group",children:[a.jsx("div",{className:"relative h-20 w-28 flex items-center justify-center bg-white rounded-xl shadow-lg border-2 border-oab-primary-dark p-2 transition-transform group-hover:scale-105",children:a.jsx("img",{src:"/images/logo-oabgo.png",alt:"Logo OAB-GO",width:110,height:80,className:"object-contain drop-shadow-lg"})}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[a.jsx("span",{className:"font-extrabold text-3xl text-oab-primary-dark tracking-wide leading-tight drop-shadow-sm",children:"OAB GOI\xc1S"}),a.jsx("span",{className:"text-oab-primary mt-1 text-base font-medium tracking-wide bg-oab-background px-2 py-0.5 rounded-md shadow-sm",children:"Sistema de Gest\xe3o de Comiss\xf5es"})]})]}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[a.jsx(i,{href:"/",className:`hover:text-oab-primary transition-colors font-medium ${"/"===h?"text-oab-primary":"text-oab-text-primary"}`,children:"In\xedcio"}),a.jsx(i,{href:"/projetos",className:`hover:text-oab-primary transition-colors font-medium ${h.startsWith("/projetos")?"text-oab-primary":"text-oab-text-primary"}`,children:"Projetos"}),a.jsx(i,{href:"/comissoes",className:`hover:text-oab-primary transition-colors font-medium ${h.startsWith("/comissoes")?"text-oab-primary":"text-oab-text-primary"}`,children:"Comiss\xf5es"}),a.jsx(i,{href:"/membros",className:`hover:text-oab-primary transition-colors font-medium ${h.startsWith("/membros")?"text-oab-primary":"text-oab-text-primary"}`,children:"Membros"}),a.jsx(i,{href:"/buscar",className:`hover:text-oab-primary transition-colors font-medium ${h.startsWith("/buscar")?"text-oab-primary":"text-oab-text-primary"}`,children:"Buscar"}),r?(0,a.jsxs)("div",{className:"relative ml-3",children:[(0,a.jsxs)("button",{type:"button",className:"flex items-center space-x-2 text-oab-text-primary hover:text-oab-primary focus:outline-none transition-colors",onClick:u,"aria-expanded":l,"aria-haspopup":"true",children:[a.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),l&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:(0,a.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu",children:[a.jsx(i,{href:"/perfil",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-oab-red hover:text-white",role:"menuitem",onClick:()=>d(!1),children:"Meu Perfil"}),a.jsx("button",{className:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-oab-red hover:text-white",role:"menuitem",onClick:x,children:"Sair"})]})})]}):a.jsx(i,{href:"/login",className:"btn-primary",children:"Entrar"})]}),a.jsx("button",{type:"button",className:"md:hidden text-oab-gray-700 hover:text-oab-red focus:outline-none",onClick:u,children:a.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),l&&a.jsx("nav",{className:"md:hidden bg-white mt-3 rounded-lg p-4 shadow-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[a.jsx(i,{href:"/",className:`hover:text-oab-red ${"/"===h?"text-oab-red font-medium":"text-oab-gray-700"}`,onClick:()=>d(!1),children:"In\xedcio"}),a.jsx(i,{href:"/projetos",className:`hover:text-oab-red ${h.startsWith("/projetos")?"text-oab-red font-medium":"text-oab-gray-700"}`,onClick:()=>d(!1),children:"Projetos"}),a.jsx(i,{href:"/comissoes",className:`hover:text-oab-red ${h.startsWith("/comissoes")?"text-oab-red font-medium":"text-oab-gray-700"}`,onClick:()=>d(!1),children:"Comiss\xf5es"}),a.jsx(i,{href:"/membros",className:`hover:text-oab-red ${h.startsWith("/membros")?"text-oab-red font-medium":"text-oab-gray-700"}`,onClick:()=>d(!1),children:"Membros"}),a.jsx(i,{href:"/buscar",className:`hover:text-oab-red ${h.startsWith("/buscar")?"text-oab-red font-medium":"text-oab-gray-700"}`,onClick:()=>d(!1),children:"Buscar"}),r?(0,a.jsxs)(a.Fragment,{children:[a.jsx("hr",{className:"border-gray-200"}),a.jsx(i,{href:"/perfil",className:"text-oab-gray-700 hover:text-oab-red",onClick:()=>d(!1),children:"Meu Perfil"}),a.jsx("button",{className:"text-left text-oab-gray-700 hover:text-oab-red",onClick:x,children:"Sair"})]}):a.jsx(i,{href:"/login",className:"btn-primary text-center mt-2",onClick:()=>d(!1),children:"Entrar"})]})})]})]})}function l(){return a.jsx("footer",{className:"bg-oab-primary-dark text-white py-8 mt-auto",children:a.jsx("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-0",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"OAB GOI\xc1S"}),a.jsx("p",{className:"text-white/80 mt-2 text-lg",children:"Sistema de Gest\xe3o de Projetos e Comiss\xf5es"})]}),(0,a.jsxs)("div",{className:"text-center md:text-right space-y-2",children:[(0,a.jsxs)("p",{className:"text-white/80",children:["\xa9 ",new Date().getFullYear()," OAB-GO. Todos os direitos reservados."]}),a.jsx("div",{className:"text-sm text-white/70",children:a.jsx("span",{children:"Rua 1121, n\xba 200, Setor Marista - Goi\xe2nia-GO"})}),a.jsx("div",{className:"text-sm text-white/80 italic",children:"Feito com ❤️ pela Comiss\xe3o de Direito Digital para OAB Goi\xe1s"}),a.jsx("div",{className:"text-sm text-white/80",children:"Apoio: RM SOFTWARES E TREINAMENTOS LTDA"})]})]})})})}var d=o(1163);function m({children:e}){let r=["/login","/cadastro","/recuperar-senha","/alterar-senha"].includes((0,d.useRouter)().pathname);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-oab-background",children:[a.jsx(c,{}),a.jsx("main",{className:`flex-grow ${r?"":"container mx-auto px-6 py-8"}`,children:e}),a.jsx(l,{})]})}function h({children:e}){let{isAuthenticated:r,loading:o,user:s}=(0,t.a)(),i=(0,d.useRouter)();return o||!r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-700 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-700",children:"Carregando..."})]})}):s?.primeiro_acesso&&"/alterar-senha"!==i.pathname?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-700 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-700",children:"Redirecionando para altera\xe7\xe3o de senha..."})]})}):a.jsx(a.Fragment,{children:e})}let u=function({Component:e,pageProps:r}){let o=["/login","/cadastro","/recuperar-senha","/alterar-senha"].includes((0,d.useRouter)().pathname);return a.jsx(t.H,{children:a.jsx(m,{children:o?a.jsx(e,{...r}):a.jsx(h,{children:a.jsx(e,{...r})})})})}},2731:(e,r,o)=>{"use strict";o.d(r,{h:()=>i});let a="https://qnsbjljmnflihwcovuwz.supabase.co/rest/v1",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFuc2JqbGptbmZsaWh3Y292dXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NjcyNjQsImV4cCI6MjA2MjU0MzI2NH0.UWGXOyL8J7e11W_CE3zIo5bn-5LwKQ1YtAS1V72DTtk",s={Authorization:`Bearer ${t}`,apikey:t,"Content-Type":"application/json"},i={getComissoes:async()=>{let e=await fetch(`${a}/comissoes?select=*&order=nome`,{headers:s});if(!e.ok)throw Error("Erro ao carregar comiss\xf5es");return{data:await e.json()}},getProjetos:async()=>{let e=await fetch(`${a}/view_projetos_comissoes?select=*`,{headers:s});if(!e.ok)throw Error("Erro ao carregar projetos");let r=await e.json(),o={};return r.forEach(e=>{o[e.projeto_id]||(o[e.projeto_id]={id:e.projeto_id,nome:e.projeto_nome,descricao:e.projeto_descricao,status:e.projeto_status,objetivos:e.objetivos,publico_alvo:e.publico_alvo,data_inicio:e.data_inicio,data_fim_prevista:e.data_fim_prevista,comissoes:[]}),e.comissao_id&&o[e.projeto_id].comissoes.push({id:e.comissao_id,nome:e.comissao_nome,descricao:e.comissao_descricao,papel:e.papel_comissao})}),{data:Object.values(o)}},getProjeto:async e=>{let r=await fetch(`${a}/projetos?id=eq.${e}&select=*`,{headers:s});if(!r.ok)throw Error("Erro ao carregar detalhes do projeto");let o=await r.json();if(0===o.length)throw Error("Projeto n\xe3o encontrado");let t=await fetch(`${a}/projetos_comissoes?projeto_id=eq.${e}&select=papel_comissao,comissoes:comissoes(id,nome,descricao,area_atuacao)`,{headers:s});if(!t.ok)throw Error("Erro ao carregar comiss\xf5es do projeto");let i=await t.json(),n=await fetch(`${a}/tags_projetos?projeto_id=eq.${e}&select=tag`,{headers:s});if(!n.ok)throw Error("Erro ao carregar tags do projeto");let c=await n.json();return{data:{...o[0],comissoes:i.map(e=>({papel:e.papel_comissao,...e.comissoes})),tags:c.map(e=>e.tag)}}},getSugestoesIntegracao:async e=>{let r=await fetch(`${a}/rpc/sugerir_integracao_projetos`,{method:"POST",headers:s,body:JSON.stringify({projeto_id:e})});if(!r.ok)throw Error("Erro ao carregar sugest\xf5es de integra\xe7\xe3o");return{data:await r.json()}},getMembros:async(e=null)=>{let r=`${a}/view_membros_comissoes?select=*`;e&&(r+=`&comissao_id=eq.${e}`),r+="&order=comissao_nome,membro_nome";let o=await fetch(r,{headers:s});if(!o.ok)throw Error("Erro ao carregar membros");return{data:await o.json()}},buscar:async e=>{let r=await fetch(`${a}/rpc/buscar_projetos_e_comissoes`,{method:"POST",headers:s,body:JSON.stringify({termo:e})});if(!r.ok)throw Error("Erro ao realizar busca");return{data:await r.json()}},gerarSugestaoProjeto:async e=>{let r=await fetch("/api/ideia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ideia:e})});if(!r.ok)throw Error("Erro ao gerar sugest\xe3o");return{data:(await r.json()).data}},criarProjeto:async e=>{let{nome:r,descricao:o,objetivos:t,resultados_esperados:i,publico_alvo:n,data_inicio:c,data_fim_prevista:l,status:d,comissoes:m,tags:h}=e;if(console.log("Dados para criar projeto:",{nome:r,status:d,comissoes:m?JSON.stringify(m):"undefined",comissoesCount:m?m.length:0}),!r||!d||!m||0===m.length)throw Error("Campos obrigat\xf3rios: nome, status e pelo menos uma comiss\xe3o");let u=await fetch(`${a}/projetos`,{method:"POST",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({nome:r,descricao:o,objetivos:t,resultados_esperados:i,publico_alvo:n,data_inicio:c,data_fim_prevista:l,status:d})});if(!u.ok)throw Error((await u.json()).message||"Erro ao criar projeto");let x=await u.json(),p=x[0].id;console.log("Projeto criado com ID:",p);let f=m.map(e=>({projeto_id:p,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao||"participante"}));console.log("Comiss\xf5es para vincular:",JSON.stringify(f));let g=0;for(let e of f)try{if(!e.comissao_id||"string"!=typeof e.comissao_id||!e.comissao_id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.error(`ID de comiss\xe3o inv\xe1lido: ${e.comissao_id}`);continue}console.log(`Tentando vincular comiss\xe3o: ${e.comissao_id}`);let r=await fetch(`${a}/projetos_comissoes`,{method:"POST",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({projeto_id:p,comissao_id:e.comissao_id,papel_comissao:e.papel_comissao||"participante"})});if(!r.ok){let o=await r.text();console.error(`Erro ao vincular comiss\xe3o (${e.comissao_id}): `,o);try{let e=JSON.parse(o);console.error("Detalhes do erro:",e)}catch(e){}continue}let o=await r.json();console.log(`Comiss\xe3o vinculada com sucesso: ${e.comissao_id}`,o),g++}catch(r){console.error(`Erro ao processar comiss\xe3o (${e.comissao_id}): `,r);continue}if(console.log(`Processo conclu\xeddo: ${g} de ${f.length} comiss\xf5es vinculadas`),h&&h.length>0)for(let e of h)try{if(!e||"string"!=typeof e){console.error(`Tag inv\xe1lida: ${e}`);continue}let r=await fetch(`${a}/tags_projetos`,{method:"POST",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({projeto_id:p,tag:e})});if(!r.ok){let o=await r.text();console.error(`Erro ao adicionar tag (${e}): `,o);continue}}catch(r){console.error(`Erro ao processar tag (${e}): `,r);continue}return 0===g&&f.length>0&&console.warn(`Aten\xe7\xe3o: Projeto ${p} criado sem nenhuma comiss\xe3o vinculada`),{data:x[0]}},adicionarMembro:async e=>{let{comissao_id:r,nome:o,cargo:t,email:i,telefone:n,inscricao_oab:c}=e;if(!r||!o)throw Error("Campos obrigat\xf3rios: comissao_id e nome");let l=await fetch(`${a}/membros_comissoes`,{method:"POST",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({comissao_id:r,nome:o,cargo:t,email:i,telefone:n,inscricao_oab:c})});if(!l.ok)throw Error((await l.json()).message||"Erro ao adicionar membro");return{data:(await l.json())[0]}},auth:{login:async(e,r)=>{let o=await fetch(`${a}/usuarios?nome_usuario=eq.${encodeURIComponent(e)}`,{headers:s});if(!o.ok)throw Error("Erro ao verificar credenciais");let t=await o.json();if(0===t.length)throw Error("Usu\xe1rio n\xe3o encontrado");let i=t[0];if(i.primeiro_acesso&&"OABGONEXT"===r)return{data:{...i,require_password_change:!0}};if(!i.primeiro_acesso){if(i.senha!==r)throw Error("Senha incorreta");return{data:i}}throw Error("Credenciais inv\xe1lidas")},alterarSenha:async(e,r)=>{let o=await fetch(`${a}/usuarios?id=eq.${e}`,{method:"PATCH",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({senha:r,primeiro_acesso:!1,updated_at:new Date().toISOString()})});if(!o.ok)throw Error("Erro ao alterar senha");return{data:(await o.json())[0]}},solicitarRecuperacao:async e=>{let r=await fetch(`${a}/usuarios?email=eq.${encodeURIComponent(e)}`,{headers:s});if(!r.ok)throw Error("Erro ao verificar email");let o=await r.json();if(0===o.length)throw Error("Email n\xe3o encontrado");let t=Math.random().toString(36).substring(2,15),i=new Date;if(i.setHours(i.getHours()+24),!(await fetch(`${a}/usuarios?id=eq.${o[0].id}`,{method:"PATCH",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({token_recuperacao:t,token_expira:i.toISOString(),primeiro_acesso:!0})})).ok)throw Error("Erro ao gerar token de recupera\xe7\xe3o");return{data:{token:t,message:"Um link de recupera\xe7\xe3o foi enviado para seu email"}}},verificarToken:async e=>{let r=await fetch(`${a}/usuarios?token_recuperacao=eq.${e}`,{headers:s});if(!r.ok)throw Error("Erro ao verificar token");let o=await r.json();if(0===o.length)throw Error("Token inv\xe1lido");let t=o[0];if(new Date(t.token_expira)<new Date)throw Error("Token expirado");return{data:t}},cadastrarUsuario:async e=>{let r=await fetch(`${a}/usuarios?comissao_id=eq.${e.comissao_id}`,{headers:s});if(!r.ok)throw Error("Erro ao verificar comiss\xe3o");if((await r.json()).length>0)throw Error("Esta comiss\xe3o j\xe1 possui um usu\xe1rio vinculado");let o=await fetch(`${a}/comissoes?id=eq.${e.comissao_id}&select=nome`,{headers:s});if(!o.ok)throw Error("Erro ao obter dados da comiss\xe3o");let t=await o.json();if(0===t.length)throw Error("Comiss\xe3o n\xe3o encontrada");let i=t[0].nome.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").replace(/\s+/g,"").toLowerCase(),n=await fetch(`${a}/usuarios`,{method:"POST",headers:{...s,Prefer:"return=representation"},body:JSON.stringify({nome_usuario:i,nome_completo:e.nome_completo,email:e.email,comissao_id:e.comissao_id,senha:"OABGONEXT",primeiro_acesso:!0,created_at:new Date().toISOString()})});if(!n.ok)throw Error("Erro ao cadastrar usu\xe1rio");return{data:(await n.json())[0],message:`Usu\xe1rio criado com sucesso! Nome de usu\xe1rio: ${i}`}}}}}};